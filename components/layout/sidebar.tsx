'use client'

import { Rss } from "lucide-react"
import Link from "next/link"
import { usePathname } from "next/navigation"
import { ComponentProps } from "react"
import { SocialLinks } from "../../lib/constants"

export default function Sidebar({ className }: ComponentProps<'aside'>) {
  const pathSegments = usePathname().split('/')
  const proseType = pathSegments[1]

  return (
    <aside className={`h-screen hidden fixed top-0 md:flex flex-col items-center px-2 py-28 left-[10%] -translate-x-full xl:left-1/2 xl:-translate-x-[34rem] ${className}`}>

      <Link href='/' className="rounded-md p-2 hover:bg-theme hover:text-white">
        <svg className="w-8 h-8" width="21" height="18" viewBox="0 0 21 18" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M0.258374 0L1.09091 0C1.39713 0.669856 1.62679 1.45455 1.7799 2.35407L18.8038 2.35407C18.8995 1.91388 19.0048 1.49282 19.1196 1.09091C19.2536 0.688995 19.3876 0.325359 19.5215 0L20.3541 0V2.92823C20.3541 3.25359 20.3636 3.63636 20.3828 4.07655C20.4019 4.51675 20.4211 4.96651 20.4402 5.42584C20.4785 5.90431 20.5072 6.35407 20.5263 6.77512C20.5646 7.21531 20.5837 7.57895 20.5837 7.86603C20.5837 11.1196 19.7129 13.6172 17.9713 15.3589C16.2297 17.1196 13.7608 18 10.5646 18C9.05263 18 7.64593 17.7799 6.3445 17.3397C5.0622 16.9187 3.95215 16.2679 3.01435 15.3876C2.07656 14.5072 1.33971 13.3876 0.803827 12.0287C0.267942 10.689 3.26953e-07 9.10048 3.26953e-07 7.26316C3.26953e-07 6.97608 0.0191404 6.65072 0.0574179 6.28708C0.0765567 5.92344 0.105264 5.54067 0.143542 5.13876C0.16268 4.73684 0.191388 4.32536 0.229665 3.90431C0.248804 3.50239 0.258374 3.11962 0.258374 2.75598V0ZM19.0909 7.46411C19.0909 6.96651 19.0813 6.48804 19.0622 6.02871C19.0622 5.56938 19.0335 5.20574 18.9761 4.9378L1.57895 4.9378C1.55981 5.03349 1.54067 5.20574 1.52153 5.45455C1.52153 5.70335 1.51196 5.97129 1.49282 6.25837C1.49282 6.54545 1.49282 6.8134 1.49282 7.0622C1.49282 7.33014 1.49282 7.52153 1.49282 7.63636C1.49282 8.95694 1.74163 10.0766 2.23924 10.9952C2.73684 11.9139 3.39713 12.6603 4.2201 13.2344C5.0622 13.8278 6.02871 14.2584 7.11962 14.5263C8.21053 14.7943 9.35885 14.9282 10.5646 14.9282C11.5024 14.9282 12.4689 14.7943 13.4641 14.5263C14.4785 14.2775 15.3971 13.8565 16.2201 13.2632C17.0622 12.689 17.7512 11.9234 18.2871 10.9665C18.823 10.0096 19.0909 8.84211 19.0909 7.46411Z" fill="currentColor"/>
          <path d="M13.4641 7.71391V9.66032L7.4354 8.62683V6.68042L13.4641 7.71391ZM7.4354 9.04884V7.94645L9.07177 8.23927V9.14358C9.07177 9.40769 9.11483 9.65745 9.20095 9.89286C9.28708 10.134 9.43062 10.3378 9.63158 10.5043C9.83253 10.6766 10.1053 10.7886 10.4498 10.8402C10.7024 10.8747 10.9148 10.8718 11.0871 10.8316C11.2651 10.7914 11.4086 10.7197 11.5177 10.6163C11.6268 10.513 11.7072 10.3838 11.7588 10.2287C11.8105 10.0737 11.8364 9.90147 11.8364 9.712V8.69573L13.4641 8.98855V9.97037C13.4641 10.4527 13.3923 10.8833 13.2488 11.2622C13.1053 11.6412 12.9014 11.9541 12.6373 12.201C12.3732 12.4536 12.0545 12.6316 11.6813 12.735C11.3139 12.8383 10.9033 12.8555 10.4498 12.7866C9.98469 12.7177 9.56555 12.5771 9.19234 12.3646C8.82488 12.1522 8.50909 11.8823 8.24497 11.5551C7.9866 11.2278 7.78564 10.8517 7.6421 10.4268C7.5043 10.0077 7.4354 9.54836 7.4354 9.04884Z" fill="currentColor"/>
        </svg>

      </Link>
      <nav className="flex flex-col gap-3 mt-auto">
        {
          proseType && (
            <Link href={`/${proseType}.xml`} target="__blank" className="rounded-md p-2 animate-fade-up hover:bg-purple-500 hover:text-purple-50">
              <Rss className='w-5 h-5'></Rss>
            </Link>
          )
        }
        {
          SocialLinks.map(item => (
            <Link href={item.link} key={item.link} target="__blank" className="rounded-md p-2 hover:bg-purple-500 hover:text-purple-50">
              <item.icon className='w-5 h-5'></item.icon>
            </Link>
          ))
        }
      </nav>
    </aside>
  )
}
